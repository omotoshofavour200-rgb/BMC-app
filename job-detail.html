<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./src/output.css" rel="stylesheet">
    <link rel="shortcut icon" href="./images/blc.png" type="image/x-icon" class="rounded-full">
    <title>Job Details - BLC</title>
</head>

<body class="bg-gray-50">
    <header class="sticky top-0 z-50 backdrop-blur-sm bg-white/80 h-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="index.html">
                        <div class="text-red-500 font-bold text-2xl"><img src="./images/blc.png" alt="logo"
                                class="w-25"></div>
                    </a>
                </div>

                <nav class="hidden md:flex items-center space-x-8 font-medium text-xs">
                    <a href="careers.html" class="text-blue-600 font-semibold transition-colors">Career</a>
                    <a href="#" class="text-gray-900/95 hover:text-gray-600 transition-colors">Partners</a>
                    <a href="#" class="text-gray-900/95 hover:text-gray-600 transition-colors">Support</a>
                    <a href="#" class="text-gray-900/95 hover:text-gray-600 transition-colors">About</a>
                    <a href="#" class="text-gray-900/95 hover:text-gray-600 transition-colors">Contact</a>
                </nav>

                <div class="md:hidden">
                    <button id="mobile-menu-button"
                        class="text-gray-900/95 hover:gray-900/95e focus:outline-none focus:gray-900/95">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 bg-white">
                <a href="careers.html"
                    class="block px-3 py-2 text-blue-600 font-semibold hover:bg-gray-100 rounded-md">Career</a>
                <a href="#"
                    class="block px-3 py-2 text-gray-900/95 hover:text-gray-500 hover:bg-gray-100 rounded-md">Partners</a>
                <a href="#"
                    class="block px-3 py-2 text-gray-900/95 hover:text-gray-500 hover:bg-gray-100 rounded-md">Support</a>
                <a href="#"
                    class="block px-3 py-2 text-gray-900/95 hover:text-gray-500 hover:bg-gray-100 rounded-md">About</a>
                <a href="#"
                    class="block px-3 py-2 text-gray-900/95 hover:text-gray-500 hover:bg-gray-100 rounded-md">Contact</a>
            </div>
        </div>
    </header>

    <main class="py-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-8">
                <button onclick="goBack()"
                    class="flex items-center text-blue-600 hover:text-blue-700 transition-colors font-medium">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                        </path>
                    </svg>
                    Back to Careers
                </button>
            </div>

            <div id="job-detail-container" class="bg-white rounded-lg shadow-md p-8">
            </div>

            <div id="application-form-container" class="mt-12">
            </div>

        </div>
    </main>

    <footer class="bg-gray-900/95 py-6 mt-16">
        <div class="container mx-auto px-6">
            <p class="text-white text-sm leading-relaxed text-center">
                © Copyright 2005-2025 BLC Software, Inc. Use of this site signifies your acceptance of BLC's Terms of
                Use. BLC, the BLC logo, and other BLC marks are assets of BLC Software, Inc. These trademarks are
                registered and may be registered in the U.S. and in other countries.
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        (function () {
            emailjs.init("WugqMMmr5Zh-h55jk");
        })();

        const jobsData = [
            {
                id: 1,
                title: "Customer Service Representative",
                department: "Support",
                location: "Remote",
                type: "Full-time",
                description: "Provide exceptional customer support and resolve inquiries for our enterprise clients.",
                fullDescription: "We are seeking a Customer Service Representative to provide exceptional support to our enterprise clients. You'll handle customer inquiries, resolve technical issues, and ensure customer satisfaction through professional communication and problem-solving skills.",
                requirements: ["High school diploma or equivalent", "Excellent communication skills", "Customer service experience preferred", "Basic computer skills", "Problem-solving abilities"],
                benefits: ["Competitive salary", "Health insurance", "Paid time off", "Training programs", "Career advancement opportunities"]
            },
            {
                id: 2,
                title: "Receptionist",
                department: "Administration",
                location: "New York, NY",
                type: "Full-time",
                description: "Serve as the first point of contact for office visitors and assist with administrative tasks.",
                fullDescription: "We are looking for a professional Receptionist to manage our front desk, handle phone calls, greet clients, and support daily office operations. The role requires excellent communication skills and a friendly demeanor.",
                requirements: ["High school diploma", "Professional phone etiquette", "Basic computer literacy", "Strong interpersonal skills"],
                benefits: ["Health and dental insurance", "Paid time off", "401(k) plan", "Employee wellness programs"]
            },
            {
                id: 3,
                title: "Travel Coordinator",
                department: "Administration",
                location: "Chicago, IL",
                type: "Full-time",
                description: "Arrange and coordinate travel schedules, accommodations, and itineraries for staff.",
                fullDescription: "Seeking a Travel Coordinator to organize flights, hotels, and logistics for employees. You’ll ensure cost-effective travel arrangements and handle last-minute changes efficiently.",
                requirements: ["Associate’s degree preferred", "Organizational skills", "Experience with travel booking tools", "Attention to detail"],
                benefits: ["Travel discounts", "Health benefits", "Paid vacation", "Professional development support"]
            },
            {
                id: 4,
                title: "Office Assistant",
                department: "Administration",
                location: "Atlanta, GA",
                type: "Hybrid",
                description: "Provide administrative support to ensure smooth daily office operations.",
                fullDescription: "We are hiring an Office Assistant to perform clerical tasks, manage office supplies, and assist with scheduling. This is a hybrid role requiring part-time office presence.",
                requirements: ["Strong communication skills", "Basic MS Office knowledge", "Organized and detail-oriented"],
                benefits: ["Flexible work schedule", "Health and dental coverage", "Paid holidays"]
            },
            {
                id: 5,
                title: "Delivery Driver",
                department: "Logistics",
                location: "Dallas, TX",
                type: "Full-time",
                description: "Safely deliver packages to customers while ensuring timely service.",
                fullDescription: "We are hiring a Delivery Driver to join our logistics team. You will be responsible for transporting goods, ensuring on-time deliveries, and maintaining excellent customer service during drop-offs. Company vehicle and fuel will be provided.",
                requirements: ["Valid driver’s license", "Clean driving record", "Ability to lift up to 50 lbs", "Time management skills"],
                benefits: ["Company vehicle", "Fuel covered", "Health insurance", "Overtime pay"]
            },
            {
                id: 6,
                title: "Truck Driver",
                department: "Logistics",
                location: "Houston, TX",
                type: "Full-time",
                description: "Transport goods across regional and interstate routes safely and efficiently.",
                fullDescription: "Join our logistics team as a Truck Driver. You’ll be responsible for driving long-haul routes, ensuring timely deliveries, and following all safety guidelines.",
                requirements: ["Commercial driver’s license (CDL)", "2+ years of driving experience", "Strong safety record"],
                benefits: ["Mileage pay", "Health and dental insurance", "401(k)", "Paid vacation"]
            },
            {
                id: 7,
                title: "Company Driver",
                department: "Transportation",
                location: "Los Angeles, CA",
                type: "Full-time",
                description: "Transport company staff and clients safely to various destinations.",
                fullDescription: "We are looking for a reliable Company Driver to provide transportation services for employees and clients. This role requires excellent driving skills and professionalism.",
                requirements: ["Valid driver’s license", "Clean driving history", "Professional appearance", "Punctuality"],
                benefits: ["Steady salary", "Health insurance", "Fuel allowance", "Paid time off"]
            },
            {
                id: 8,
                title: "Security Guard",
                department: "Security",
                location: "Miami, FL",
                type: "Full-time",
                description: "Ensure safety and protection of property, staff, and visitors.",
                fullDescription: "We are seeking a Security Guard to monitor premises, patrol facilities, and handle security incidents professionally. Training will be provided.",
                requirements: ["High school diploma", "Security license preferred", "Ability to work night shifts", "Strong observational skills"],
                benefits: ["Uniform provided", "Health insurance", "Overtime pay", "Job stability"]
            },
            {
                id: 9,
                title: "Janitor",
                department: "Facilities",
                location: "Chicago, IL",
                type: "Part-time",
                description: "Maintain cleanliness and sanitation across office facilities.",
                fullDescription: "We are hiring a Janitor to ensure office and common areas are clean, stocked, and safe. Responsibilities include sweeping, mopping, and handling waste disposal.",
                requirements: ["Previous cleaning experience", "Physical stamina", "Reliability"],
                benefits: ["Flexible schedule", "Health coverage for full-time", "Paid sick days"]
            },
            {
                id: 10,
                title: "Maintenance Technician",
                department: "Facilities",
                location: "Phoenix, AZ",
                type: "Full-time",
                description: "Perform routine maintenance and repairs on company equipment and facilities.",
                fullDescription: "We need a Maintenance Technician to handle general repairs, equipment servicing, and facility upkeep. Knowledge of electrical and plumbing systems is a plus.",
                requirements: ["Technical training or certification", "Handyman skills", "Problem-solving ability"],
                benefits: ["Health and dental insurance", "401(k)", "Paid vacation"]
            },
            {
                id: 11,
                title: "Warehouse Associate",
                department: "Logistics",
                location: "Atlanta, GA",
                type: "Full-time",
                description: "Assist with inventory management, packaging, and shipments in the warehouse.",
                fullDescription: "Join our warehouse operations team as a Warehouse Associate. Duties include organizing inventory, preparing orders, and loading shipments.",
                requirements: ["Ability to lift heavy objects", "Organizational skills", "Teamwork"],
                benefits: ["Overtime pay", "Health insurance", "Employee discounts"]
            },
            {
                id: 12,
                title: "Call Center Agent",
                department: "Support",
                location: "Remote",
                type: "Full-time",
                description: "Handle inbound and outbound calls while assisting customers with inquiries.",
                fullDescription: "We are hiring Call Center Agents to provide professional support, resolve concerns, and maintain positive customer experiences.",
                requirements: ["Good communication skills", "Call center experience preferred", "Ability to work flexible hours"],
                benefits: ["Work from home", "Health insurance", "Performance bonuses"]
            },
            {
                id: 13,
                title: "Administrative Assistant",
                department: "Administration",
                location: "Denver, CO",
                type: "Hybrid",
                description: "Support executives with scheduling, documentation, and communications.",
                fullDescription: "We are seeking an Administrative Assistant to handle clerical duties, manage calendars, and coordinate meetings.",
                requirements: ["Organized and detail-oriented", "MS Office skills", "Professional demeanor"],
                benefits: ["Health coverage", "401(k)", "Paid time off"]
            },
            {
                id: 14,
                title: "Personal Driver",
                department: "Transportation",
                location: "Washington, DC",
                type: "Full-time",
                description: "Provide safe and timely transportation services for executives.",
                fullDescription: "We are looking for a professional Personal Driver for our executive team. You’ll be responsible for maintaining vehicle cleanliness and ensuring punctuality.",
                requirements: ["Valid driver’s license", "Excellent navigation skills", "Discretion and professionalism"],
                benefits: ["Competitive salary", "Fuel covered", "Health benefits"]
            },
            {
                id: 15,
                title: "Cook",
                department: "Catering",
                location: "Orlando, FL",
                type: "Full-time",
                description: "Prepare meals according to menu and dietary requirements.",
                fullDescription: "We are hiring a Cook to join our catering team. Responsibilities include meal preparation, kitchen sanitation, and assisting in menu planning.",
                requirements: ["Culinary training preferred", "Ability to work in fast-paced environment", "Team player"],
                benefits: ["Free meals", "Health insurance", "Paid vacation"]
            },
            {
                id: 16,
                title: "Cashier",
                department: "Retail",
                location: "Las Vegas, NV",
                type: "Part-time",
                description: "Handle customer payments and provide excellent service at checkout.",
                fullDescription: "We are hiring Cashiers to process sales, assist customers, and manage registers in our retail store.",
                requirements: ["Basic math skills", "Customer service orientation", "Reliability"],
                benefits: ["Store discounts", "Flexible shifts", "Paid training"]
            },
            {
                id: 17,
                title: "Housekeeper",
                department: "Hospitality",
                location: "San Diego, CA",
                type: "Full-time",
                description: "Maintain cleanliness of rooms and guest facilities.",
                fullDescription: "We are looking for Housekeepers to clean guest rooms, restock supplies, and ensure high sanitation standards.",
                requirements: ["Previous housekeeping experience", "Physical stamina", "Attention to detail"],
                benefits: ["Free staff meals", "Health coverage", "Paid holidays"]
            },
            {
                id: 18,
                title: "Data Entry Clerk",
                department: "Administration",
                location: "Remote",
                type: "Part-time",
                description: "Input and update company data accurately and efficiently.",
                fullDescription: "Seeking a Data Entry Clerk to manage digital records, update systems, and ensure data accuracy.",
                requirements: ["Typing speed of 50+ WPM", "Basic computer skills", "Attention to detail"],
                benefits: ["Remote work", "Flexible schedule", "Training provided"]
            },
            {
                id: 19,
                title: "Event Assistant",
                department: "Events",
                location: "Boston, MA",
                type: "Contract",
                description: "Assist in setting up and managing company events.",
                fullDescription: "We are hiring an Event Assistant to coordinate logistics, help with event setup, and ensure smooth execution of corporate gatherings.",
                requirements: ["Organizational skills", "Ability to lift 30 lbs", "Willingness to work weekends"],
                benefits: ["Networking opportunities", "Free meals during events", "Flexible work schedule"]
            },
            {
                id: 20,
                title: "Technical Support Specialist",
                department: "Support",
                location: "Seattle, WA",
                type: "Hybrid",
                description: "Provide IT troubleshooting and technical assistance for staff and customers.",
                fullDescription: "We are hiring a Technical Support Specialist to assist users with hardware and software issues, set up devices, and ensure smooth IT operations.",
                requirements: ["IT support experience", "Problem-solving mindset", "Strong communication"],
                benefits: ["Health insurance", "401(k)", "Remote flexibility"]
            },
            {
                id: 21,
                title: "Front Desk Clerk",
                department: "Hospitality",
                location: "San Francisco, CA",
                type: "Full-time",
                description: "Manage guest check-ins, reservations, and provide excellent service.",
                fullDescription: "We are seeking a Front Desk Clerk to handle reservations, greet guests, and support front office operations at our hotel.",
                requirements: ["Customer service experience", "Professional communication skills", "Organized and reliable"],
                benefits: ["Health coverage", "Paid time off", "Discounted hotel stays"]
            }
        ];

        function loadJobDetail() {
            const jobId = localStorage.getItem('selectedJobId');
            if (!jobId) {
                window.location.href = 'careers.html';
                return;
            }

            const job = jobsData.find(j => j.id == jobId);
            if (!job) {
                window.location.href = 'careers.html';
                return;
            }

            const submissionKey = `job_application_${jobId}`;
            const hasAlreadyApplied = localStorage.getItem(submissionKey);

            const departmentColors = {
                'Engineering': 'bg-blue-100 text-blue-800', 'Product': 'bg-green-100 text-green-800',
                'Sales': 'bg-purple-100 text-purple-800', 'Design': 'bg-orange-100 text-orange-800',
                'Marketing': 'bg-red-100 text-red-800', 'Support': 'bg-indigo-100 text-indigo-800',
                'Human Resources': 'bg-pink-100 text-pink-800', 'Finance': 'bg-yellow-100 text-yellow-800',
                'Legal': 'bg-gray-100 text-gray-800', 'Operations': 'bg-teal-100 text-teal-800'
            };

            const jobDetailContainer = document.getElementById('job-detail-container');
            jobDetailContainer.innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <span class="px-3 py-1 rounded-full text-sm font-medium ${departmentColors[job.department] || 'bg-gray-100 text-gray-800'}">${job.department}</span>
                        <div class="text-right">
                            <span class="text-gray-600 text-sm">${job.location}</span>
                            <span class="text-gray-400 mx-2">•</span>
                            <span class="text-gray-600 text-sm">${job.type}</span>
                        </div>
                    </div>
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">${job.title}</h1>
                    <p class="text-xl text-gray-600">${job.description}</p>
                </div>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="md:col-span-3">
                        <div class="mb-8">
                            <h2 class="text-2xl font-semibold text-gray-900 mb-4">About This Role</h2>
                            <p class="text-gray-700 leading-relaxed">${job.fullDescription}</p>
                        </div>
                        <div class="mb-8">
                            <h2 class="text-2xl font-semibold text-gray-900 mb-4">Requirements</h2>
                            <ul class="space-y-2">${job.requirements.map(req => `<li class="flex items-start"><svg class="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg><span class="text-gray-700">${req}</span></li>`).join('')}</ul>
                        </div>
                        <div>
                            <h2 class="text-2xl font-semibold text-gray-900 mb-4">Benefits & Perks</h2>
                            <ul class="space-y-2">${job.benefits.map(benefit => `<li class="flex items-start"><svg class="w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg><span class="text-gray-700">${benefit}</span></li>`).join('')}</ul>
                        </div>
                    </div>
                </div>
            `;

            // Inject the application form
            const formContainer = document.getElementById('application-form-container');

            if (hasAlreadyApplied) {
                const submissionData = JSON.parse(hasAlreadyApplied);
                formContainer.innerHTML = `
                    <div class="bg-white rounded-lg shadow-md p-8">
                        <div class="text-center">
                            <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
                                <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Application Already Submitted</h2>
                            <p class="text-gray-600 mb-4">You have already submitted an application for the <strong>${job.title}</strong> position.</p>
                            <div class="bg-blue-50 border border-blue-200 rounded-md p-4 mb-6">
                                <div class="text-sm text-blue-800">
                                    <p><strong>Submitted on:</strong> ${submissionData.submittedAt}</p>
                                    <p><strong>Applicant:</strong> ${submissionData.applicantName}</p>
                                    <p><strong>Email:</strong> ${submissionData.email}</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-500 mb-6">We'll review your application and get back to you soon. You can only submit one application per position.</p>
                            <div class="space-y-3">
                                <button onclick="window.location.href='careers.html'" 
                                        class="w-full justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                                    Browse Other Positions
                                </button>
                                <button onclick="clearApplicationData('${jobId}')" 
                                        class="w-full justify-center rounded-md border border-red-300 bg-white py-2 px-4 text-sm font-medium text-red-700 shadow-sm hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors">
                                    Clear Application Data (Apply Again)
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                formContainer.innerHTML = `
                    <div class="bg-white rounded-lg shadow-md p-8">
                        <h2 class="text-3xl font-bold text-gray-900 mb-2">Apply for this position</h2>
                        <p class="text-gray-600 mb-4">Please fill out the form below to submit your application.</p>
                        <p class="text-sm text-red-600 mb-4 font-medium">NOTE: This form should be filled with capital letters throughout</p>
                        <p class="text-sm text-blue-600 mb-8 font-medium">⚠️ You can only submit one application per position. Please ensure all information is accurate before submitting.</p>
                        
                        <form action="" method="POST" class="space-y-8" onsubmit="handleFormSubmit(event)">
                        
                        <input type="hidden" name="Applying for Job" value="${job.title}">

                        <!-- Enhanced personal details section with all employment form fields -->
                        <fieldset class="border-t border-gray-200 pt-6">
                            <legend class="text-lg font-semibold text-gray-900 mb-6">Personal Details</legend>
                            <div class="grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-6">
                                <div>
                                    <!-- Updated field name to match EmailJS template -->
                                    <label for="first-name" class="block text-sm font-medium text-gray-700">First Name *</label>
                                    <input type="text" name="first-name" id="first-name" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <!-- Updated field name to match EmailJS template -->
                                    <label for="middle-name" class="block text-sm font-medium text-gray-700">Middle Name</label>
                                    <input type="text" name="middle-name" id="middle-name" 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <!-- Updated field name to match EmailJS template -->
                                    <label for="last-name" class="block text-sm font-medium text-gray-700">Last Name *</label>
                                    <input type="text" name="last-name" id="last-name" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <!-- Updated field name to match EmailJS template -->
                                    <label for="dob" class="block text-sm font-medium text-gray-700">Date of Birth (DD/MM/YYYY) *</label>
                                    <input type="date" name="dob" id="dob" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Sex *</label>
                                    <div class="flex space-x-4">
                                        <!-- Updated field name to match EmailJS template -->
                                        <label class="flex items-center">
                                            <input type="radio" name="sex" value="MALE" required class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                            <span class="ml-2 text-sm text-gray-700">Male</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="sex" value="FEMALE" required class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                            <span class="ml-2 text-sm text-gray-700">Female</span>
                                        </label>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Marital Status *</label>
                                    <div class="flex flex-wrap gap-4">
                                        <!-- Updated field name to match EmailJS template -->
                                        <label class="flex items-center">
                                            <input type="radio" name="marital-status" value="SINGLE" required class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                            <span class="ml-2 text-sm text-gray-700">Single</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="marital-status" value="MARRIED" required class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                            <span class="ml-2 text-sm text-gray-700">Married</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="marital-status" value="DIVORCED" required class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                            <span class="ml-2 text-sm text-gray-700">Divorced</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <!-- Enhanced contact details section -->
                        <fieldset class="border-t border-gray-200 pt-6">
                            <legend class="text-lg font-semibold text-gray-900 mb-6">Contact Details</legend>
                            <div class="grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-6">
                                <div class="sm:col-span-2">
                                    <!-- Updated field name to match EmailJS template -->
                                    <label for="address" class="block text-sm font-medium text-gray-700">Contact Address *</label>
                                    <input type="text" name="address" id="address" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <label for="city" class="block text-sm font-medium text-gray-700">City *</label>
                                    <input type="text" name="city" id="city" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <label for="state" class="block text-sm font-medium text-gray-700">State *</label>
                                    <input type="text" name="state" id="state" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <!-- Updated field name to match EmailJS template -->
                                    <label for="postal-code" class="block text-sm font-medium text-gray-700">Postal Code *</label>
                                    <input type="text" name="postal-code" id="postal-code" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <label for="country" class="block text-sm font-medium text-gray-700">Country *</label>
                                    <input type="text" name="country" id="country" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                           style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700">Email Address *</label>
                                    <input type="email" name="email" id="email" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                </div>
                                <div>
                                    <!-- Updated field name to match EmailJS template -->
                                    <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number *</label>
                                    <input type="tel" name="phone" id="phone" required 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label for="alt-phone" class="block text-sm font-medium text-gray-700">Alternative Phone Number</label>
                                    <input type="tel" name="alt-phone" id="alt-phone" 
                                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                </div>
                            </div>
                        </fieldset>

                          <!-- Enhanced attestation section with signature -->
                        <fieldset class="border-t border-gray-200 pt-6">
                            <legend class="text-lg font-semibold text-gray-900 mb-6">Attestation</legend>
                            <div class="space-y-6">
                                <div class="bg-gray-50 p-4 rounded-md">
                                    <p class="text-sm text-gray-700 mb-4">
                                        I, <input type="text" name="attestation-name" id="attestation-name" required 
                                                  class="inline-block w-48 mx-1 px-2 py-1 border-b border-gray-400 bg-transparent focus:outline-none focus:border-blue-500 uppercase"
                                                  style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()" placeholder="FULL NAME">, 
                                        hereby verify that the above information given by me is correct and if found otherwise, any drastic action can be taken against me.
                                    </p>
                                </div>
                                <div class="grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-6">
                                    <div>
                                        <label for="signature" class="block text-sm font-medium text-gray-700">Digital Signature *</label>
                                        <input type="text" name="signature" id="signature" required placeholder="Type your full name as signature"
                                               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 uppercase"
                                               style="text-transform: uppercase;" oninput="this.value = this.value.toUpperCase()">
                                    </div>
                                    <div>
                                        <label for="signature-date" class="block text-sm font-medium text-gray-700">Date *</label>
                                        <input type="date" name="signature-date" id="signature-date" required 
                                               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                    </div>
                                </div>
                                <div class="relative flex items-start">
                                    <div class="flex h-5 items-center">
                                        <input id="attestation-checkbox" name="attestation-checkbox" type="checkbox" required 
                                               class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                    </div>
                                    <div class="ml-3 text-sm">
                                        <label for="attestation-checkbox" class="font-medium text-gray-700">I confirm the attestation above *</label>
                                        <p class="text-gray-500">Check this box to confirm that you agree with the attestation statement.</p>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <div class="pt-6">
                            <button type="submit" class="w-full justify-center rounded-md border border-transparent bg-blue-600 py-3 px-4 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                                Submit Employment Application
                            </button>
                        </div>
                    </form>
                </div>
                `;
            }

            // Update page title
            document.title = `${job.title} - BLC Careers`;
        }

        function clearApplicationData(jobId) {
            const submissionKey = `job_application_${jobId}`;
            localStorage.removeItem(submissionKey);
            location.reload();
        }

        function handleFormSubmit(event) {
            event.preventDefault();

            const jobId = localStorage.getItem('selectedJobId');
            const submissionKey = `job_application_${jobId}`;

            if (localStorage.getItem(submissionKey)) {
                alert('⚠️ You have already submitted an application for this position.');
                return;
            }

            const submitButton = event.target.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.innerHTML;

            // Validate required fields
            const requiredFields = event.target.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('border-red-500', 'ring-red-500');
                    isValid = false;
                } else {
                    field.classList.remove('border-red-500', 'ring-red-500');
                }
            });

            if (!isValid) {
                alert('⚠️ Please fill in all required fields marked with *');
                return;
            }

            // Show loading state
            submitButton.disabled = true;
            submitButton.innerHTML = `
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Submitting Application...
            `;

            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());

            // Create a formatted message for the email
            const fullName = `${data['first-name'] || ''} ${data['middle-name'] || ''} ${data['last-name'] || ''}`.trim();
            const applicationMessage = `
                    NEW JOB APPLICATION RECEIVED

                    Position Applied For: ${data['Applying for Job']}

                    PERSONAL INFORMATION:
                    - Full Name: ${fullName}
                    - Date of Birth: ${data.dob}
                    - Gender: ${data.sex}
                    - Marital Status: ${data['marital-status']}

                    CONTACT INFORMATION:
                    - Email: ${data.email}
                    - Phone: ${data.phone}
                    - Alternative Phone: ${data['alt-phone'] || 'Not provided'}
                    - Address: ${data.address}
                    - City: ${data.city}
                    - State: ${data.state}
                    - Postal Code: ${data['postal-code']}
                    - Country: ${data.country}

                    Application submitted on: ${new Date().toLocaleString()}
                                `.trim();

            // Add the formatted message to form data
            const messageInput = document.createElement('input');
            messageInput.type = 'hidden';
            messageInput.name = 'message';
            messageInput.value = applicationMessage;
            event.target.appendChild(messageInput);

            // console.log('[v0] 📋 Application Data Being Sent:', data);
            // console.log('[v0] 📧 Formatted Email Message:', applicationMessage);

            // Send using EmailJS
            emailjs.sendForm("service_njbyaqd", "template_5axgyfk", event.target)
                .then((response) => {
                    // console.log('[v0] ✅ EmailJS Success Response:', response);

                    const submissionData = {
                        jobId: jobId,
                        jobTitle: data['Applying for Job'],
                        applicantName: fullName,
                        email: data.email,
                        submittedAt: new Date().toLocaleString(),
                        timestamp: Date.now()
                    };
                    localStorage.setItem(submissionKey, JSON.stringify(submissionData));

                    // Success handling
                    submitButton.innerHTML = `
                        <svg class="w-5 h-5 mr-2 inline" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        Application Sent Successfully!
                    `;
                    submitButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                    submitButton.classList.add('bg-green-600');

                    // Show success message
                    const successMessage = document.createElement('div');
                    successMessage.className = 'mt-4 p-4 bg-green-50 border border-green-200 rounded-md';
                    successMessage.innerHTML = `
                        <div class="flex">
                            <svg class="w-5 h-5 text-green-400 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                            </svg>
                            <div>
                                <h3 class="text-sm font-medium text-green-800">Application Submitted Successfully!</h3>
                                <p class="text-sm text-green-700 mt-1">Thank you ${fullName} for your interest in the ${data['Applying for Job']} position. We'll review your application and get back to you soon.</p>
                                <p class="text-xs text-green-600 mt-2">Note: You can only submit one application per position. This form will be disabled for future visits.</p>
                            </div>
                        </div>
                    `;
                    event.target.appendChild(successMessage);

                    setTimeout(() => {
                        location.reload();
                    }, 4000);

                }, (err) => {
                    // Error handling
                    // console.error("[v0] ❌ EmailJS Error Details:", err);
                    // console.error("[v0] ❌ Error Status:", err.status);
                    // console.error("[v0] ❌ Error Text:", err.text);

                    submitButton.disabled = false;
                    submitButton.innerHTML = originalButtonText;

                    const errorMessage = document.createElement('div');
                    errorMessage.className = 'mt-4 p-4 bg-red-50 border border-red-200 rounded-md';
                    errorMessage.innerHTML = `
                        <div class="flex">
                            <svg class="w-5 h-5 text-red-400 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 001.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                            </svg>
                            <div>
                                <h3 class="text-sm font-medium text-red-800">Submission Failed</h3>
                                <p class="text-sm text-red-700 mt-1">There was an error submitting your application. Please try again or contact support if the problem persists.</p>
                                <p class="text-xs text-red-600 mt-2">Error: ${err.text || 'Unknown error occurred'}</p>
                            </div>
                        </div>
                    `;
                    event.target.appendChild(errorMessage);

                    // Remove error message after 5 seconds
                    setTimeout(() => {
                        errorMessage.remove();
                        messageInput.remove(); // Remove the hidden message input
                    }, 5000);
                });
        }

        document.addEventListener('DOMContentLoaded', function () {
            loadJobDetail();

            // Add real-time validation for required fields
            setTimeout(() => {
                const requiredFields = document.querySelectorAll('[required]');
                requiredFields.forEach(field => {
                    field.addEventListener('blur', function () {
                        if (!this.value.trim()) {
                            this.classList.add('border-red-500', 'ring-red-500');
                        } else {
                            this.classList.remove('border-red-500', 'ring-red-500');
                        }
                    });

                    field.addEventListener('input', function () {
                        if (this.value.trim()) {
                            this.classList.remove('border-red-500', 'ring-red-500');
                        }
                    });
                });

                // Email validation
                const emailField = document.getElementById('email');
                if (emailField) {
                    emailField.addEventListener('blur', function () {
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (this.value && !emailRegex.test(this.value)) {
                            this.classList.add('border-red-500', 'ring-red-500');
                        } else if (this.value) {
                            this.classList.remove('border-red-500', 'ring-red-500');
                            this.classList.add('border-green-500', 'ring-green-500');
                        }
                    });
                }
            }, 1000);
        });

        function goBack() {
            window.location.href = 'careers.html';
        }

        // Mobile menu functionality
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        document.addEventListener('click', (event) => {
            if (!mobileMenu.contains(event.target) && !mobileMenuButton.contains(event.target) && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
            }
        });

    </script>
</body>

</html>
